!function(a){a.fn.listnav=function(b){var c=a.extend({},a.fn.listnav.defaults,b),d=["_","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","-"],e=!1,f=null!==document.ontouchstart?"mouseover":"touchstart";return c.prefixes=a.map(c.prefixes,function(a){return a.toLowerCase()}),this.each(function(){function o(){var i,j;if(b.append(w()),g=a(".ln-letters",b).slice(0,1),c.showCounts&&(h=a(".ln-letter-count",b).slice(0,1)),q(),t(),v(),c.flagDisabled&&s(),c.includeAll||a(".all",g).remove(),c.includeNums||a("._",g).remove(),c.includeOther||a(".-",g).remove(),c.removeDisabled&&a(".ln-disabled",g).remove(),a(":last",g).addClass("ln-last"),a.cookie&&null!==c.cookieName&&(i=a.cookie(c.cookieName),null!==i&&(c.initLetter=i)),""!==c.initLetter)e=!0,a("."+c.initLetter.toLowerCase(),g).slice(0,1).trigger(f);else if(c.includeAll)a(".all",g).addClass("ln-selected");else for(j=c.includeNums?0:1;j<d.length;j++)if(k[d[j]]>0){e=!0,a("."+d[j],g).slice(0,1).trigger(f);break}}function p(){var c=h.outerHeight();h.css({top:a("a:first",b).slice(0,1).position().top-c})}function q(){var b,e,f="",g=c.prefixes.length>0,h=c.filterSelector.length>0;a(j).children().each(function(){var d,i,j;if(e=a(this),b=h?a.trim(e.find(c.filterSelector).text()).toLowerCase():a.trim(e.text()).toLowerCase(),""!==b){if(g&&(d=a.map(c.prefixes,function(a){return a.indexOf(" ")<=0?a+" ":a}),i=a.grep(d,function(a){return 0===b.indexOf(a)}),i.length>0))return j=b.toLowerCase().split(i[0])[1],f=null!=j?a.trim(j).charAt(0):b.charAt(0),f=makePy(f)[0].toLowerCase(),r(f,e,!0),void 0;f=b.charAt(0),f=makePy(f)[0].toLowerCase(),r(f,e)}})}function r(a,b,c){/\W/.test(a)&&(a="-"),isNaN(a)||(a="_"),b.addClass("ln-"+a),void 0===k[a]&&(k[a]=0),k[a]++,c||l++}function s(){for(var b=0;b<d.length;b++)void 0===k[d[b]]&&a("."+d[b],g).addClass("ln-disabled")}function t(){j.append('<li class="ln-no-match listNavHide">'+c.noMatchText+"</li>")}function u(b){if(a(b).hasClass("all"))return l;var c=k[a(b).attr("class").split(" ")[0]];return void 0!==c?c:0}function v(){var d,f,i,k;c.showCounts&&(b.mouseover(function(){p()}),a(".ln-letters a",b).mouseover(function(){var b=a(this).position().left,c=a(this).outerWidth()+"px",d=u(this);h.css({left:b,width:c}).text(d).addClass("letterCountShow").removeClass("listNavHide")}).mouseout(function(){h.addClass("listNavHide").removeClass("letterCountShow")})),k=function(){var k,b=d,h=b.attr("class").split(" ")[0],i=j.children(".ln-no-match");n!==h&&(a("a.ln-selected",g).removeClass("ln-selected"),"all"===h?(j.children().addClass("listNavShow").removeClass("listNavHide"),i.addClass("listNavHide").removeClass("listNavShow"),m=!0):(m?(j.children().addClass("listNavHide").removeClass("listNavShow"),m=!1):""!==n&&j.children(".ln-"+n).addClass("listNavHide").removeClass("listNavShow"),k=u(f),k>0?(j.children(".ln-"+h).addClass("listNavShow").removeClass("listNavHide"),i.addClass("listNavHide").removeClass("listNavShow")):i.addClass("listNavShow").removeClass("listNavHide")),n=h,a.cookie&&null!==c.cookieName&&a.cookie(c.cookieName,h,{expires:999}),d.addClass("ln-selected"),d.blur(),e||null===c.onClick?e=!1:c.onClick(h))},a("a",g).mouseover(function(){d=a(this),f=this,i=setTimeout(k,300)}).mouseout(function(){clearTimeout(i)})}function w(){var b,a=[];for(b=1;b<d.length;b++)0===a.length&&a.push('<a class="all" href="#">ALL</a><a class="_" href="#">#</a>'),a.push('<a class="'+d[b]+'" href="#">'+("-"===d[b]?"...":d[b].toUpperCase())+"</a>");return'<div class="ln-letters">'+a.join("")+"</div>"+(c.showCounts?'<div class="ln-letter-count listNavHide">0</div>':"")}var b,g,h,i=this.id,j=a(this),k={},l=0,m=!0,n="";a("#"+i+"-nav").length||a('<div id="'+i+'-nav" class="listNav"/>').insertBefore(j),b=a("#"+i+"-nav"),o()})},a.fn.listnav.defaults={initLetter:"",includeAll:!0,incudeOther:!1,includeNums:!0,flagDisabled:!0,removeDisabled:!1,noMatchText:"No matching entries",showCounts:!0,cookieName:null,onClick:null,prefixes:[],filterSelector:""}}(jQuery);
