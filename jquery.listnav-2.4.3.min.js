(function(a){a.fn.listnav=function(q){var c=a.extend({},a.fn.listnav.defaults,q),d="_abcdefghijklmnopqrstuvwxyz-".split(""),n=!1,v=null!==document.ontouchstart?"mouseenter":"touchstart";c.prefixes=a.map(c.prefixes,function(a){return a.toLowerCase()});var y=c.allText,z=c.numberText;return this.each(function(){function q(){var b,f,h="",g=0<c.prefixes.length,d=0<c.filterSelector.length;a(k).children().each(function(){f=a(this);b=d?a.trim(f.find(c.filterSelector).text()).toLowerCase():a.trim(f.text()).toLowerCase();
if(""!==b){if(g){var e=a.map(c.prefixes,function(b){return 0>=b.indexOf(" ")?b+" ":b});e=a.grep(e,function(a){return 0===b.indexOf(a)});if(0<e.length){e=b.toLowerCase().split(e[0])[1];h=null!=e?a.trim(e).charAt(0):b.charAt(0);h=makePy(h)[0].toLowerCase();w(h,f,!0);return}}h=b.charAt(0);h=makePy(h)[0].toLowerCase();w(h,f)}})}function w(b,a,c){/\W/.test(b)&&(b="-");isNaN(b)||(b="_");a.addClass("ln-"+b);void 0===l[b]&&(l[b]=0);l[b]++;c||x++}function A(){c.showCounts&&a("body").enterleave({css:m,enterT:300,
downenter:0,downFn:function(){var b=r.outerHeight();r.css({top:a("a:first",m).slice(0,1).position().top-b})}});var b;a("a",g).enterleave({enterT:300,downenter:1,downFn:function(f){b=f;f=b.attr("class").split(" ")[0];var d=k.children(".ln-no-match");if(p!==f){a("a.ln-selected",g).removeClass("ln-selected");if("all"===f)k.children().addClass("listNavShow").removeClass("listNavHide"),d.addClass("listNavHide").removeClass("listNavShow"),t=!0;else{t?(k.children().addClass("listNavHide").removeClass("listNavShow"),
t=!1):""!==p&&k.children(".ln-"+p).addClass("listNavHide").removeClass("listNavShow");var e=b;e.hasClass("all")?e=x:(e=l[a(e).attr("class").split(" ")[0]],e=void 0!==e?e:0);0<e?(k.children(".ln-"+f).addClass("listNavShow").removeClass("listNavHide"),d.addClass("listNavHide").removeClass("listNavShow")):d.addClass("listNavShow").removeClass("listNavHide")}p=f;a.cookie&&null!==c.cookieName&&a.cookie(c.cookieName,f,{expires:999});b.addClass("ln-selected");b.blur();if(n||null===c.onClick)n=!1;else c.onClick(f)}}})}
function B(){for(var b=[],a=1;a<d.length;a++)0===b.length&&b.push('<a class="all" href="#">'+y+'</a><a class="_" href="#">'+z+"</a>"),b.push('<a class="'+d[a]+'" href="#">'+("-"===d[a]?"...":d[a].toUpperCase())+"</a>");return'<div class="ln-letters">'+b.join("")+"</div>"+(c.showCounts?'<div class="ln-letter-count listNavHide">0</div>':"")}var g,r,u=this.id,k=a(this),l={},x=0,t=!0,p="";a("#"+u+"-nav").length||a('<div id="'+u+'-nav" class="listNav"/>').insertBefore(k);var m=a("#"+u+"-nav");(function(){m.append(B());
g=(".ln-letters",m).slice(0,1);c.showCounts&&(r=a(".ln-letter-count",m).slice(0,1));q();k.append('<li class="ln-no-match listNavHide">'+c.noMatchText+"</li>");A();if(c.flagDisabled)for(var b=0;b<d.length;b++)void 0===l[d[b]]&&a("."+d[b],g).addClass("ln-disabled");c.includeAll||a(".all",g).remove();c.includeNums||a("._",g).remove();c.includeOther||a(".-",g).remove();c.removeDisabled&&a(".ln-disabled",g).remove();a(":last",g).addClass("ln-last");a.cookie&&null!==c.cookieName&&(b=a.cookie(c.cookieName),
null!==b&&(c.initLetter=b));if(""!==c.initLetter)n=!0,a("."+c.initLetter.toLowerCase(),g).slice(0,1).trigger(v);else if(c.includeAll)a(".all",g).addClass("ln-selected");else for(b=c.includeNums?0:1;b<d.length;b++)if(0<l[d[b]]){n=!0;a("."+d[b],g).slice(0,1).trigger(v);break}})()})};a.fn.listnav.defaults={allText:"All",numberText:"#",initLetter:"",includeAll:!0,incudeOther:!1,includeNums:!0,flagDisabled:!0,removeDisabled:!1,noMatchText:"No matching entries",showCounts:!0,cookieName:null,onClick:null,
prefixes:[],filterSelector:""}})(jQuery);
